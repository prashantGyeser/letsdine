<%= form_for(@event, :html => {:multipart => true}) do |f| %>

<%# Event details tab start %>

<div class="container">
  <div class="row">
    <div class="col-md-12 newEventPage expandable-panel" id="cp-1">

      <div class="newEventSummary">
        <h4>
          <div class="initialHeader">
            <span class="step">1</span>
            <span class="text">Fill In The Event Details</span>
          </div>
          <div class="successHeader">
            <span><i class="icon-ok-sign finished"></i></span>
            <span class="text">Event Details Completed</span>
            <a href="#" class="pull-right">Modify Event Details</a>
          </div>
        </h4>
      </div>

      <div class="expandable-panel-content">
        <div class="row">
          <div class="col-md-6">
            <label>Select the kind of event you want to conduct</label>
            <div class="radio">
            <label>
            <input type="radio" name="optionsRadios" id="optionsRadios1" value="option1" checked>
            Private Event - You have to share the url with your friends
            </label>
            </div>
            <div class="radio">
            <label>
            <input type="radio" name="optionsRadios" id="optionsRadios2" value="option2">
            Public Event - Listed on the LetsDine homepage
            </label>
            </div>
          </div>
          <div class="col-md-6">
            <label>Where do you want to conduct the event?</label>
           <div class="citySelect">Select city</div>
           </div>
          </div>

          <div class="row">
            <div class="col-md-6">
              <div class="form-group">
                <label for="event_name">Event name</label>
                <input type="text" class="form-control" id="event_name" placeholder="Enter the event name">
              </div>
            </div>
            <div class="col-md-6">
              <label for="event_name">Maximum number of people that can attend</label>
              <input type="number" class="form-control" id="max_seats" placeholder="Enter the maximum number of people that can attend">
            </div>
          </div>

          <div class="row">
            <div class="col-md-12">
              <label for="event_description">Description for this event</label>
              <textarea class="form-control" rows="3" placeholder="Enter a description for this event"></textarea>
            </div>
          </div>

          <div class="row">
            <div class="col-md-12">
              <a href="#" class="btn btn-primary nextStep">Event details completed</a>
            </div>
          </div>

      </div>

    </div>
  </div>
</div>
<%# Event details tab end %>

<%# Event Date and Time tab start %>
<div class="container">
  <div class="row">
    <div class="col-md-12 newEventPage expandable-panel" id="cp-2">
      <div class="newEventSummary">
        <h4>
          <div class="initialHeader">
            <span class="step">2</span>
            <span class="text">Fill In The Event Date and Time</span>
          </div>
          <div class="successHeader">
            <span><i class="icon-ok-sign finished"></i></span>
            <span class="text">Event Date and Time Completed</span>
            <a href="#" class="pull-right">Modify Event Date and Time</a>
          </div>
        </h4>
      </div>

      <div class="expandable-panel-content">
            <div class="row">
              <div class="col-md-12">
                <div class="alert alert-info" id="dateTimeAlert">
                  <strong>Event timing:</strong>
                  Your event will be conducted on <strong id="infoDate"></strong> at <strong id="infoTime"></strong>
                </div>
              </div>
            </div>
            <div class="row">
              <div class="col-md-6">


                <div id="calendar"></div>


              </div>
              <div class="col-md-6">
                <div class="timeHeader" id="showDate">
                  Monday, 23 September 2013
                </div>
                <div class="timeSubHeader">
                  Morning & Afternoon
                </div>
                <table class="timeTable" id="morning">
                  <tr>
                    <td>09:00</td>
                    <td>09:30</td>
                    <td>10:00</td>
                    <td>10:30</td>
                  </tr>
                  <tr>
                    <td>11:00</td>
                    <td>11:30</td>
                    <td>12:00</td>
                    <td>12:30</td>
                  </tr>
                </table>
                <div class="timeSubHeader">
                  Evening
                </div>
                <table class="timeTable" id="evening">
                  <tr>
                    <td>06:00</td>
                    <td>06:30</td>
                    <td>7:00</td>
                    <td>7:30</td>
                  </tr>
                  <tr>
                    <td>8:00</td>
                    <td>8:30</td>
                    <td>9:00</td>
                    <td>9:30</td>
                  </tr>
                </table>
                

              </div>
            </div>
            <div class="row">
              <div class="col-md-12">
                <a href="#" class="btn btn-primary nextStep">Finished selecting date and time</a>
              </div>
            </div>
          </div>

    </div>
  </div>
</div>
<%# Event Date and Time tab end %>

<%# Restaurant select tab start %>
<div class="container">
  <div class="row">
    <div class="col-md-12 newEventPage expandable-panel" id="cp-3">
      <div class="newEventSummary">
        <h4>
          <div class="initialHeader">
            <span class="step">3</span>
            <span class="text">Fill In The Event Date and Time</span>
          </div>
          <div class="successHeader">
            <span><i class="icon-ok-sign finished"></i></span>
            <span class="text">Event Date and Time Completed</span>
            <a href="#" class="pull-right">Modify Event Date and Time</a>
          </div>
        </h4>
      </div>

      <div class="expandable-panel-content">
        <div class="row">
          <div class="col-md-5">
            <ul class="restaurantDetails">
              <% @restaurants.each do |restaurant| %>
                <li class="<%= restaurant.city %>">
                  <% restaurantHiddenFieldId = "restaurant_id_" + restaurant.id.to_s %>
                  <%= hidden_field_tag restaurantHiddenFieldId, restaurant.id  %>
                  <h4><%= restaurant.name %></h4>
                  <% if restaurant.city == "Kuala Lumpur" || restaurant.city == "Selangor" || restaurant.city == "Perak" || restaurant.city == "Penang" %>
                    <h4><span>RM <%= restaurant.price %> per person</span></h4>  
                  <% else %>
                    <h4><span>Rs <%= restaurant.price %> per person</span></h4>
                  <% end %>
                </li>  
              <% end %>
              
            </ul>
          </div>
          <div class="col-md-7">
            <% @restaurants.each do |restaurant| %>

              <div class="retaurantMenu" id="<%= restaurant.id %>">
                    <div class="menuTopBar">

                      <div class="row">
                        <div class="col-md-3">
                          <% if restaurant.photo_url(:thumb).to_s.blank? %>
                          <% else %>
                            <%= image_tag restaurant.photo_url(:thumb).to_s, :style => "width:150px;height:150px;" %>                            
                          <% end %>
                        </div>
                        <div class="col-md-7">
                          <h2><%= restaurant.name %></h2>
                          <div class="row">
                            <div class="col-md-12">
                              <%= restaurant.address %>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>

                    <!--
                    <div class="newEventRestaurantDescription">
                      Lorem ipsum dolor sit amet, consectetur adipiscing elit. Praesent laoreet diam est, ac eleifend nisi laoreet in. In magna erat, volutpat a tristique eu, ornare pretium lacus. Aenean vel leo sapien. Morbi quis magna eget turpis varius eleifend. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. In gravida condimentum imperdiet. Nulla interdum semper pharetra. Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Proin lectus leo, bibendum eu nulla non, ornare pharetra mauris. Curabitur nec libero at neque ullamcorper hendrerit vel eu massa. Nam fermentum pharetra pharetra.
                    </div>
                    -->

                    <div class="newEventRestaurantSeatingDetails">
                      <h2>Menu</h2>
                      <% menu_items = restaurant.menu_items %>
                      <% @menu_items_categorized = menu_items.group_by { |menu_item| menu_item.course_name} %>
                      <%= render partial: 'events/menu',  :locals => {:menu_items_categorized => @menu_items_categorized} %>
                      
                    </div>

                  </div>
                <% end %>
          </div>
        </div>
      </div>      

    </div>
  </div>
</div>
<%# Restaurant select tab end %>

<% end %>












<%= form_for(@event, :html => {:multipart => true}) do |f| %>
  <% if @event.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(@event.errors.count, "error") %> prohibited this event from being saved:</h2>

      <ul>
      <% @event.errors.full_messages.each do |msg| %>
        <li><%= msg %></li>
      <% end %>
      </ul>
    </div>  
  <% end %>
  <div class="tab-content">
    <div class="tab-pane" id="tab1">    
      <div class="field event_type_radio">
        <%= f.radio_button :event_type, "private", :class => "event_radio", :id => "private_event_radio" %>
        <%= label_tag(:event_name_private, "Private Event", :class => "event_radio_label") %>
        <%= f.radio_button :event_type, "public", :class => "event_radio", :id => "public_event_radio" %>
        <%= label_tag(:event_name_private, "Public Event", :class => "event_radio_label") %>
      </div>

      <div class="clearfix"></div>
      <p id="private_event_description">A unique URL will be generated for you. You can share this URL with people that will attend. The URL will not be shown anywhere else on the site.</p>
      <p id="public_event_description">Anyone can sign up for this event and will be accessible across the site</p>
      <br/>
      <div class="field">
        <%= f.label :city %>
        <%= select_tag(:city, options_for_select([['Select a city',''],['Hyderabad','Hyderabad'], ['Pune','Pune'], ['Ahmedabad', 'Ahmedabad'], ['Bangalore', 'Bangalore'], ['Kuala Lumpur', 'Kuala Lumpur'], ['Selangor', 'Selangor'], ['Perak', 'Perak'], ['Penang', 'Penang']])) %>
      </div>
      <div class="field">
        <%= f.label :event_name %>
        <%= f.text_field :event_name %>
      </div>
      <div class="field">
        <%= f.label :status %>
        <%# select_tag(:status, '<option value="open">Open</option><option value="closed">Closed</option>') %>
        <%= f.select :status, [ 'open', 'closed'], :prompt => 'Select One' %>
      </div>
      <div class="field">
        <%= f.label :event_description %>
        <%= f.text_area :event_description, :rows => 5 %>
      </div>
      <div class="field">
        <%= f.label :max_seats %>
        <%= f.number_field :max_seats %>
      </div>
      <div class="field">
        <%= f.label :event_date %>
        <%#f.date_select :event_date %>
        <div class="input-append date" id="dp3" data-date="<%= Time.now.strftime("%d/%m/%Y") %>" data-date-format="dd-mm-yyyy">
          <%= f.text_field :event_date %>
          <span class="add-on"><i class="icon-calendar"></i></span>
          <!--<input size="16" type="text" value="12-02-2012" readonly>-->
          
        </div>

      </div>
      <div class="field">
        <%= f.label :event_time %>
        <div class="input-append bootstrap-timepicker">
          <%= f.text_field :event_time, 'data-minute-step' => "30" %>
          <span class="add-on"><i class="icon-time"></i></span>
        </div>
      </div>
      <div class="field">
        <%= f.label :event_image %>
        <%= f.file_field :event_image %>  
      </div>
    </div>
    
    <div class="tab-pane" id="tab2">

      <ul class="nav nav-tabs">
        <li class="active"><a href="#restaurants" data-toggle="tab">Restaurants</a></li>
        <!--<li><a href="#experiences" data-toggle="tab">Dining Experiences</a></li>-->
      </ul>

      <div class="tab-content">
        <div class="tab-pane active" id="restaurants">
          <div class="field">
            <%# f.select :restaurant_id, Restaurant.all.collect {|x| [x.name, x.id]}, {}%>        
            <%= f.hidden_field :restaurant_id %>

            <div class="row-fluid">
              <div class="span6">
                <% @restaurants.each do |restaurant| %>
                  <div class="restaurantDetailsCotaniner restaurant_hidden <%= restaurant.city %>" id="<%= restaurant.id %>"> 
                    <% if restaurant.photo_url(:thumb).to_s.blank? %>
                      
                    <% else %>
                      <%= image_tag restaurant.photo_url(:thumb).to_s %>  
                    <% end %>
                    
                    <div class="restaurantDetails">
                      <h4><%= restaurant.name %></h4>
                      <h4>Price: <%= restaurant.price %> </h4>
                      <a class="medium awesome blue">View menu</a>
                    </div>
                  </div>
                <% end %>  
                
                
              </div>

              <div class="span6">
                <div class="restaurantMenu">
                    <% @restaurants.each do |restaurant| %>
                      <div class="menuItems" id="restaurant<%= restaurant.id %>menu">
                        <% menu_items_categorized = restaurant.menu_items.group_by { |menu_item| menu_item.course_name} %>
                        <% menu_items_categorized.each do |course_name, menu_items| %>
                          <h4><%= course_name %></h4>
                          <ul>
                            <% menu_items.each do |menu_item| %>
                              <li><%= menu_item.name %></li>
                            <% end %>
                          </ul>
                        <% end %>
                      </div>
                  <% end %>                
                  

                  </div> 
                </div>
                
              </div>

            </div>    
        </div>

        <!--
        Dining experiences. 
        <div class="tab-pane" id="experiences">
          <div class="field">
            <%# f.select :restaurant_id, Restaurant.all.collect {|x| [x.name, x.id]}, {}%>        
            <%# f.hidden_field :experience_id %>

            <div class="row-fluid">
              <div class="span6">
                <% @experiences.each do |experience| %>
                  <div class="restaurantDetailsCotaniner restaurant_hidden <%= experience.city %>" id="<%= experience.id %>"> 
                    <%= image_tag experience.experience_picture_url(:thumb).to_s %>
                    <div class="restaurantDetails">
                      <h4><%= experience.name %></h4>
                      <p>
                        <%= experience.about %>
                      </p>
                      <h4>Price: <%= experience.cost %> </h4>
                      <a class="medium awesome blue">View menu</a>
                    </div>
                  </div>
                <% end %>  
                
                
              </div>

              <div class="span6">
                <div class="restaurantMenu">
                    <% @experiences.each do |experience| %>
                      <div class="menuItems" id="restaurant<%= experience.id %>menu">
                        <% menu_items_categorized = experience.menu_items.group_by { |menu_item| menu_item.course_name} %>
                        <% menu_items_categorized.each do |course_name, menu_items| %>
                          <h4><%= course_name %></h4>
                          <ul>
                            <% menu_items.each do |menu_item| %>
                              <li><%= menu_item.name %></li>
                            <% end %>
                          </ul>
                        <% end %>
                      </div>
                  <% end %>                
                  

                  </div> 
                </div>
                
              </div>

            </div>  
        </div>
        -->
      </div>

      
        
      </div>
      <div class="tab-pane" id="tab3">
      <div class="field">
        <%= f.label :invitees %>
        <p>
          Enter the email address for all the people you want to invite. Seperate each email id by a comma. We will send them an invite
        </p>
        <%= f.text_area :invitees, :rows => 5 %>
      </div>
      <div class="field share_on_facebook">
        <%= check_box_tag 'facebook_share', :true %>
        Share on Facebook
      </div>
      <div class="field">
        <div class="actions">
          <%= f.submit :class => "large awesome green" %>
        </div>
      </div>
    </div>
    <ul class="pager wizard">
      <li class="previous first" style="display:none;"><a href="#">First</a></li>
      <li class="previous"><a href="#">Previous</a></li>
      <li class="next last" style="display:none;"><a href="#">Last</a></li>
      <li class="next"><a href="#">Next</a></li>
    </ul> 
  </div>
    
    

    
<% end %>  
