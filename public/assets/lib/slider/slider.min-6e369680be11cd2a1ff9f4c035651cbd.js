(function(n){n.fn.fullWidth=function(i){var t={maxHeight:450,minHeight:375,delay:5e3,transition:1e3,maxFont:36,minFont:20},e=n.extend(t,i);return this.each(function(){var i=n(this),t=i.find(".inner"),r=t.find(".slide"),s=r.find("img"),a=i.find(".slide-nav"),c=i.find(".controls a"),o="",u=9999,h={current:0,max:r.length-1},d={slides:"",resize:""},f=function(n,i){t.is(":animated")||(m(),h.current="right"===n?h.current+1>h.max?0:h.current+1:"left"===n?0>h.current-1?h.max:h.current-1:i||"0",o.removeClass("current").eq(h.current).addClass("current"),t.animate({"margin-left":"-"+100*h.current+"%"},e.transition,function(){l()}))},l=function(){d.slides=setTimeout(function(){f("right")},e.delay)},m=function(){clearTimeout(d.slides)},g=function(){var i=n(window).width(),a=parseInt(i/3,10),c=u>=i?["100%","auto","9999"]:["","",""],o=t.height(),h=480>=i?["0","100%","none"]:["","",""],d=i/41;d=d>e.maxFont?e.maxFont:e.minFont>d?e.minFont:d,t.css("height",function(){return a>e.maxHeight?e.maxHeight:e.minHeight>a?e.minHeight:a}),s.css({"margin-top":function(){var i=n(this).height();return"-"+(o>i?0:i-o)/2+"px"},height:c[0],width:c[1],maxWidth:c[2]}),r.find("div").css({"font-size":d,top:function(){var t=o-n(this).height();return 480>=i?t:t/2},padding:h[0],width:h[1]}).find("br").css("display",h[2])},w=function(){n(window).resize(function(){clearTimeout(d.resize),d.resize=setTimeout(function(){g()},100)}).trigger("resize"),c.on("click",function(){return f(this.className),!1}),i.on("mouseenter mouseleave",function(n){c.is(":animated")||("mouseenter"===n.type?c.fadeIn():c.fadeOut())}),o.on("click",function(){f("direct",n(this).index())}),n(document).on("keydown",function(n){(37===n.which||39===n.which)&&f(37===n.which?"left":"right")})};(function(){t.css("height",e.minHeight),s.each(function(){var i=n(this).attr("width");u=u>i?i:u}),r.each(function(i){n(this).addClass("slide-"+(i+1))}),t.css("width",100*r.length+"%"),r.css("width",parseFloat(100/r.length,10)+"%").each(function(){a.append("<span>&bull;</span>")}),r.find("div").wrapInner("<p />"),o=a.find("span"),o.first().addClass("current"),a.css("width",function(){return 26*o.length}),n(window).load(function(){w(),t.fadeTo(1e3,1,function(){l()})})})()})}})(jQuery);