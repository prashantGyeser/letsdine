(function(window,angular,undefined){"use strict";angular.module("ngAnimate",["ng"]).config(["$provide","$animateProvider",function($provide,$animateProvider){var noop=angular.noop,forEach=angular.forEach,selectors=$animateProvider.$$selectors,NG_ANIMATE_STATE="$$ngAnimateState",NG_ANIMATE_CLASS_NAME="ng-animate",rootAnimateState={running:!0};$provide.decorator("$animate",["$delegate","$injector","$sniffer","$rootElement","$timeout","$rootScope",function($delegate,$injector,$sniffer,$rootElement,$timeout,$rootScope){function lookup(name){if(name){var matches=[],flagMap={},classes=name.substr(1).split(".");($sniffer.transitions||$sniffer.animations)&&classes.push("");for(var i=0;classes.length>i;i++){var klass=classes[i],selectorFactoryName=selectors[klass];selectorFactoryName&&!flagMap[klass]&&(matches.push($injector.get(selectorFactoryName)),flagMap[klass]=!0)}return matches}}function performAnimation(event,className,element,parent,after,onComplete){function progress(index){animations[index].done=!0,(animations[index].endFn||noop)();for(var i=0;animations.length>i;i++)if(!animations[i].done)return;done()}function done(){if(!done.hasBeenRun){done.hasBeenRun=!0;var data=element.data(NG_ANIMATE_STATE);data&&(isClassBased?cleanup(element):(data.flagTimer=$timeout(function(){cleanup(element)},0,!1),element.data(NG_ANIMATE_STATE,data))),(onComplete||noop)()}}var classes=(element.attr("class")||"")+" "+className,animationLookup=(" "+classes).replace(/\s+/g,"."),animations=[];forEach(lookup(animationLookup),function(animation){animations.push({start:animation[event]})}),parent||(parent=after?after.parent():element.parent());var disabledAnimation={running:!0};if((parent.inheritedData(NG_ANIMATE_STATE)||disabledAnimation).running||0==animations.length)return done(),void 0;var ngAnimateState=element.data(NG_ANIMATE_STATE)||{},isClassBased="addClass"==event||"removeClass"==event;if(ngAnimateState.running){if(isClassBased&&ngAnimateState.structural)return onComplete&&onComplete(),void 0;$timeout.cancel(ngAnimateState.flagTimer),cancelAnimations(ngAnimateState.animations),(ngAnimateState.done||noop)()}element.data(NG_ANIMATE_STATE,{running:!0,structural:!isClassBased,animations:animations,done:done}),element.addClass(NG_ANIMATE_CLASS_NAME),forEach(animations,function(animation,index){var fn=function(){progress(index)};animation.start?animation.endFn=isClassBased?animation.start(element,className,fn):animation.start(element,fn):fn()})}function cancelChildAnimations(element){angular.forEach(element[0].querySelectorAll("."+NG_ANIMATE_CLASS_NAME),function(element){element=angular.element(element);var data=element.data(NG_ANIMATE_STATE);data&&(cancelAnimations(data.animations),cleanup(element))})}function cancelAnimations(animations){var isCancelledFlag=!0;forEach(animations,function(animation){(animation.endFn||noop)(isCancelledFlag)})}function cleanup(element){element.removeClass(NG_ANIMATE_CLASS_NAME),element.removeData(NG_ANIMATE_STATE)}return $rootElement.data(NG_ANIMATE_STATE,rootAnimateState),{enter:function(element,parent,after,done){this.enabled(!1,element),$delegate.enter(element,parent,after),$rootScope.$$postDigest(function(){performAnimation("enter","ng-enter",element,parent,after,function(){done&&$timeout(done,0,!1)})})},leave:function(element,done){cancelChildAnimations(element),this.enabled(!1,element),$rootScope.$$postDigest(function(){performAnimation("leave","ng-leave",element,null,null,function(){$delegate.leave(element,done)})})},move:function(element,parent,after,done){cancelChildAnimations(element),this.enabled(!1,element),$delegate.move(element,parent,after),$rootScope.$$postDigest(function(){performAnimation("move","ng-move",element,null,null,function(){done&&$timeout(done,0,!1)})})},addClass:function(element,className,done){performAnimation("addClass",className,element,null,null,function(){$delegate.addClass(element,className,done)})},removeClass:function(element,className,done){performAnimation("removeClass",className,element,null,null,function(){$delegate.removeClass(element,className,done)})},enabled:function(value,element){switch(arguments.length){case 2:if(value)cleanup(element);else{var data=element.data(NG_ANIMATE_STATE)||{};data.structural=!0,data.running=!0,element.data(NG_ANIMATE_STATE,data)}break;case 1:rootAnimateState.running=!value;break;default:value=!rootAnimateState.running}return!!value}}}]),$animateProvider.register("",["$window","$sniffer","$timeout",function($window,$sniffer,$timeout){function afterReflow(callback){animationReflowQueue.push(callback),$timeout.cancel(animationTimer),animationTimer=$timeout(function(){angular.forEach(animationReflowQueue,function(fn){fn()}),animationReflowQueue=[],animationTimer=null,lookupCache={}},10,!1)}function getElementAnimationDetails(element,cacheKey,onlyCheckTransition){var data=lookupCache[cacheKey];if(!data){var transitionDuration=0,transitionDelay=0,animationDuration=0,animationDelay=0;forEach(element,function(element){if(element.nodeType==ELEMENT_NODE){var elementStyles=$window.getComputedStyle(element)||{};if(transitionDuration=Math.max(parseMaxTime(elementStyles[transitionProp+durationKey]),transitionDuration),!onlyCheckTransition){transitionDelay=Math.max(parseMaxTime(elementStyles[transitionProp+delayKey]),transitionDelay),animationDelay=Math.max(parseMaxTime(elementStyles[animationProp+delayKey]),animationDelay);var aDuration=parseMaxTime(elementStyles[animationProp+durationKey]);aDuration>0&&(aDuration*=parseInt(elementStyles[animationProp+animationIterationCountKey])||1),animationDuration=Math.max(aDuration,animationDuration)}}}),data={transitionDelay:transitionDelay,animationDelay:animationDelay,transitionDuration:transitionDuration,animationDuration:animationDuration},lookupCache[cacheKey]=data}return data}function parseMaxTime(str){var total=0,values=angular.isString(str)?str.split(/\s*,\s*/):[];return forEach(values,function(value){total=Math.max(parseFloat(value)||0,total)}),total}function getCacheKey(element){var parent=element.parent(),parentID=parent.data(NG_ANIMATE_PARENT_KEY);return parentID||(parent.data(NG_ANIMATE_PARENT_KEY,++parentCounter),parentID=parentCounter),parentID+"-"+element[0].className}function animate(element,className,done){function onAnimationProgress(event){event.stopPropagation();var ev=event.originalEvent||event,timeStamp=ev.$manualTimeStamp||ev.timeStamp||Date.now();Math.max(timeStamp-startTime,0)>=maxDelayTime&&ev.elapsedTime>=maxDuration&&done()}var cacheKey=getCacheKey(element);if(getElementAnimationDetails(element,cacheKey,!0).transitionDuration>0)return done(),void 0;element.addClass(className);var timings=getElementAnimationDetails(element,cacheKey+" "+className),maxDuration=Math.max(timings.transitionDuration,timings.animationDuration);if(maxDuration>0){var maxDelayTime=1e3*Math.max(timings.transitionDelay,timings.animationDelay),startTime=Date.now(),node=element[0];timings.transitionDuration>0&&(node.style[transitionProp+propertyKey]="none");var activeClassName="";forEach(className.split(" "),function(klass,i){activeClassName+=(i>0?" ":"")+klass+"-active"});var css3AnimationEvents=animationendEvent+" "+transitionendEvent;return afterReflow(function(){timings.transitionDuration>0&&(node.style[transitionProp+propertyKey]=""),element.addClass(activeClassName)}),element.on(css3AnimationEvents,onAnimationProgress),function(cancelled){element.off(css3AnimationEvents,onAnimationProgress),element.removeClass(className),element.removeClass(activeClassName),cancelled&&done()}}element.removeClass(className),done()}function suffixClasses(classes,suffix){var className="";return classes=angular.isArray(classes)?classes:classes.split(/\s+/),forEach(classes,function(klass,i){klass&&klass.length>0&&(className+=(i>0?" ":"")+klass+suffix)}),className}var transitionProp,transitionendEvent,animationProp,animationendEvent,forEach=angular.forEach;window.ontransitionend===undefined&&window.onwebkittransitionend!==undefined?(transitionProp="WebkitTransition",transitionendEvent="webkitTransitionEnd transitionend"):(transitionProp="transition",transitionendEvent="transitionend"),window.onanimationend===undefined&&window.onwebkitanimationend!==undefined?(animationProp="WebkitAnimation",animationendEvent="webkitAnimationEnd animationend"):(animationProp="animation",animationendEvent="animationend");var animationTimer,durationKey="Duration",propertyKey="Property",delayKey="Delay",animationIterationCountKey="IterationCount",ELEMENT_NODE=1,NG_ANIMATE_PARENT_KEY="$ngAnimateKey",lookupCache={},parentCounter=0,animationReflowQueue=[];return{enter:function(element,done){return animate(element,"ng-enter",done)},leave:function(element,done){return animate(element,"ng-leave",done)},move:function(element,done){return animate(element,"ng-move",done)},addClass:function(element,className,done){return animate(element,suffixClasses(className,"-add"),done)},removeClass:function(element,className,done){return animate(element,suffixClasses(className,"-remove"),done)}}}])}])})(window,window.angular);