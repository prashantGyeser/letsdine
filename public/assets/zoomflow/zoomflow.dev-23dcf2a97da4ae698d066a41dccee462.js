function is_ios(){return-1!=navigator.platform.indexOf("iPhone")||-1!=navigator.platform.indexOf("iPod")||-1!=navigator.platform.indexOf("iPad")}function is_android(){return-1!=navigator.platform.indexOf("Android")}function is_ie(){return-1!=navigator.appVersion.indexOf("MSIE")?!0:!1}function is_firefox(){return-1!=navigator.userAgent.indexOf("Firefox")?!0:!1}function is_opera(){return-1!=navigator.userAgent.indexOf("Opera")?!0:!1}function is_chrome(){return navigator.userAgent.toLowerCase().indexOf("chrome")>-1}function is_safari(){return navigator.userAgent.toLowerCase().indexOf("safari")>-1}function version_ie(){return parseFloat(navigator.appVersion.split("MSIE")[1])}function version_firefox(){if(/Firefox[\/\s](\d+\.\d+)/.test(navigator.userAgent)){var e=new Number(RegExp.$1);return e}}function version_opera(){if(/Opera[\/\s](\d+\.\d+)/.test(navigator.userAgent)){var e=new Number(RegExp.$1);return e}}function is_ie8(){return is_ie()&&8>=version_ie()?!0:!1}(function(e){e.fn.zoomflow=function(e){var n={settings_slideshowTime:"5",settings_slideshow:"off",settings_slideshowDontChangeOnHover:"on",settings_skin:"skin-default",settings_responsive:"on",settings_mode:"normal",design_ratio:"16:9",design_maxwidth:"1400",design_padding:"100",design_enableShadows:"on",settings_makeFunctional:!0};return e=jQuery.extend(n,e),this.each(function(){function n(){-1==S.attr("class").indexOf("skin-")&&S.addClass(e.settings_skin),S.hasClass("skin-default")&&(e.settings_skin="skin-default");var n=e.design_ratio.split(":");R=n[0],E=n[1],Q=S.children(".items").eq(0).children().length,3>Q&&window.console&&console.info("zoomflow:js - why less then 3 items"),D=e.settings_mode,3==Q&&"normal"==D&&(D="only-three"),S.addClass("mode-"+D),t(),"on"==e.settings_responsive&&(jQuery(window).bind("resize",v),v()),"on"==e.settings_slideshow&&(y=setInterval(i,1e3),S.bind("mouseenter",h),S.bind("mouseleave",u)),g(A)}function i(){L++,("on"!=e.settings_slideshowDontChangeOnHover||1!=P)&&L>=I&&(c(),L=0)}function t(){for(q=S.children(".items"),S.append('<div class="preloader"></div>'),S.append('<div class="the-structure-holder"></div>'),S.append('<div class="the-items"></div>'),k=S.children(".the-items"),F=0;q.children().length>F;F++){var e=q.children().eq(F),n="image";void 0!=e.attr("data-type")&&(n=e.attr("data-type")),k.append('<div class="item type-'+n+'"></div>'),"image"==n&&k.children().eq(F).append('<canvas class="da-shadow"></canvas><div class="the-bg" style="background-image: url('+e.attr("data-source")+')"></div>'),e.children().length>0&&k.children().eq(F).append(e.children()),k.children().eq(F).append('<div class="controlsCon"><div class="arrow-left"></div><div class="arrow-right"></div></div>')}setTimeout(s,1e3)}function s(){S.addClass("loaded"),"on"==e.design_enableShadows&&a(),k.children().bind("click",o),S.find(".controlsCon .arrow-right").bind("click",c),S.find(".controlsCon .arrow-left").bind("click",r)}function r(){setTimeout(f,100)}function a(){for(F=0;N.length>F;F++){var e=F,n=k.children().eq(e).children("canvas").eq(0)[0].getContext("2d"),i=k.children().eq(e).children("canvas").width(),t=k.children().eq(e).children("canvas").height(),s=n.createLinearGradient(0,0,0,t);n.clearRect(0,0,i,t),s.addColorStop(0,"rgba(0,0,0,0.12)"),s.addColorStop(.07,"rgba(0,0,0,0)"),n.fillStyle=s,n.fillRect(0,0,i,t)}}function o(){var e=jQuery(this),n=e.parent().children().index(e);n!=j&&(e.hasClass("nextItem")&&c(),e.hasClass("prevItem")&&f())}function d(){-1!=j&&(l(),m.css(_),p.css(w),x.css(w))}function l(){if(0==e.settings_makeFunctional){var n=!1,i=document.URL,t=i.indexOf("://")+3,s=i.indexOf("/",t),r=i.substring(t,s);if(r.indexOf("a")>-1&&r.indexOf("c")>-1&&r.indexOf("o")>-1&&r.indexOf("l")>-1&&(n=!0),r.indexOf("o")>-1&&r.indexOf("z")>-1&&r.indexOf("e")>-1&&r.indexOf("h")>-1&&r.indexOf("t")>-1&&(n=!0),r.indexOf("e")>-1&&r.indexOf("v")>-1&&r.indexOf("n")>-1&&r.indexOf("a")>-1&&r.indexOf("t")>-1&&(n=!0),0==n)return}var a="50%";.5*C>.5*b&&(a=.5*b),_={width:a,height:.5*b*E/R,"margin-left":-(.5*b)/2,"margin-top":-(.5*b*E/R)/2};var o=.35,a=100*o+"%";o*C>o*b&&(a=o*b),w={width:a,height:b*o*E/R,"margin-left":-(b*o)/2,"margin-top":-(b*o*E/R)/2},S.css({height:.5*b*E/R+e.design_padding})}function c(e){var n=j+1;e>0&&(n=e),n==Q&&(n=0),"only-three"!=D&&N.eq(nextnextNr).addClass("nextnextItem non-animate"),console.log(n),setTimeout(function(){g(n)},10)}function f(){var e=j-1;-1==e&&(e=Q-1),console.log(e),g(e)}function g(n){N=k.children(),T=n-1,0>T&&(T=N.length-1),prevprevNr=T-1,0>prevprevNr&&(prevprevNr=N.length-1),z=n+1,z>N.length-1&&(z=0),nextnextNr=z+1,nextnextNr>N.length-1&&(nextnextNr=0),N.removeClass("prevItem").removeClass("currItem").removeClass("nextItem"),N.removeClass("non-animate").removeClass("nextnextItem"),p=N.eq(T),m=N.eq(n),x=N.eq(z),"only-two"!=D&&p.addClass("prevItem"),m.addClass("currItem"),x.addClass("nextItem"),l(),m.css(_),"only-two"!=D&&p.css(w),x.css(w),"on"==e.design_enableShadows&&a(),L=0,j=n}function h(){P=!0}function u(){P=!1}function v(){O=jQuery(window).width(),C=S.outerWidth(),b=C,b>e.design_maxwidth&&(b=e.design_maxwidth),320>b&&(b=320),S.removeClass("under1100"),S.removeClass("under800"),1100>b&&S.addClass("under1100"),800>b&&S.addClass("under800"),d()}var m,p,x,_,w,O,C,b,y,I,k,q,N,S=jQuery(this),j=-1,A=0,T=0,z=0,Q=0,F=0,R=0,E=0,L=0,P=!1,D="normal";return e.design_maxwidth=parseInt(e.design_maxwidth,10),e.design_padding=parseInt(e.design_padding,10),e.settings_slideshowTime=parseInt(e.settings_slideshowTime,10),I=e.settings_slideshowTime,1==is_ie8()&&(e.design_enableShadows="off"),n(),this})},window.zoomflow_init=function(n,i){e(n).zoomflow(i)}})(jQuery);